{%- set absolutePageUrl -%}{{ page.url | url | absoluteUrl(site.url) }}{%- endset -%}

{% set pageTitle = title + ' — ' + site.name %} {# We don't want any
duplication. This is likely for the home page. #} 
{% if site.name === title %}
{% set pageTitle = title %} {% endif %} {% set siteTitle = site.name %} {% set
currentUrl = site.url + page.url %} {# If the page’s Front Matter has specific
metaTitle and/or metaDesc items, switch them into the mix. #} {% if metaTitle %}
{% set pageTitle = metaTitle %} {% endif %} 

{%- set isPost = layout == 'post'
-%} {%- set isCurtain = layout == 'curtain' -%} {%- if isPost or isCurtain -%}
{# Auto-Generate a Description for Posts and Curtain #} {%- set currentPage =
helpers.currentPage(collections.all, page) -%} {%- set autoDescription =
currentPage.templateContent | excerpt | safe | striptags -%} {% endif %}

{#Above is a mess#}

{# Title #}
<title>{{ pageTitle }}</title>

<!-- I don't understand this at all!!! -->
{# Page-specific #}
<meta name="description" content="{{ description or summary or autoDescription or site.description }}" />
{%- if image -%}<meta name="image" content="{{ absolutePageUrl }}{{ image }}">{%- endif -%}
<meta property="og:title" content="{{ pageTitle }}" />
<meta property="og:description" content="{{ description or summary or autoDescription or site.description }}" />
<meta property="og:url" content="{{ currentUrl }}" />
<meta property="og:image" content="{%- if image -%}{{ absolutePageUrl }}{{ image }}{%- else -%}{{ site.author.avatar | url | absoluteUrl(site.url) }}{%- endif -%}">
<meta name="twitter:card" content="summary_large_image" />

{# General #}
{%- if isPost or isCurtain -%}
<meta property="og:type" content="article">
{% else %}
<meta property="og:type" content="website" />
{%- endif -%}
<meta name="author" content="{{ site.author.name }}">
<meta property="og:site_name" content="{{ siteTitle }}">
<meta name="twitter:site" content="@{{ site.author.social.twitter.name }}">
<meta name="twitter:creator" content="@{{ site.author.social.twitter.name }}">
<link rel="canonical" href="{{ currentUrl }}" />

<link rel="icon" href="/images/meta/favicon.svg" type="image/svg+xml" />
